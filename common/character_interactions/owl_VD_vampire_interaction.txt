become_vampire_interaction = {
icon = make_vampire
category = interaction_category_friendly
use_diplomatic_range = yes
interface_priority = 5
ignores_pending_interaction_block = no

desc = become_vampire_interaction_desc
	
	is_shown = {
		# Check if target has vampire trait.
		scope:recipient = { has_trait = vampire_character }
		scope:recipient = { is_courtier_of = scope:actor}
		
		NOT = { scope:actor = scope:recipient }
		NOT = {scope:actor = { has_trait = vampire_character }
		}
	}

on_accept = {
	scope:actor = { 
		add_trait = sanguinare_vampiris
		trigger_event = ek_health.2002
	}
}

auto_accept = yes
ai_will_do = 0
}


owl_snd_vampire_thrall_interaction = {
	interface_priority = 200
	common_interaction = yes
	category = interaction_category_prison
	icon = icon_dead

	is_shown = {
		NOT = { scope:actor = scope:recipient }
		scope:actor = {
				has_trait = vampire_character
			}
		scope:recipient = {
			is_imprisoned_by = scope:actor
			NOT = {
				OR = {
					has_trait = undead_character
					has_trait = lich_character
					has_trait = vampire_character
					has_trait = lycan_character
					has_character_flag = race_daedra
				}
			}
		}
	}

	is_valid_showing_failures_only = {
	}

	special_interaction = execute_prisoner_interaction

	force_notification = yes
	show_answer_notification = no

	desc = owl_snd_vampire_thrall_interaction_desc
	
	ai_potential = {
		base = 10
	}
	
	ai_will_do = {
		base = 10
	}

	send_option = {
		is_shown = {
			NOT = { scope:actor.faith = scope:recipient.faith } 
		}
		flag = owl_snd_vampire_thrall_change_faith
		localization = "owl_snd_vampire_thrall_interaction_faith"
	}

	on_accept = {
		if = {
			limit = {
				scope:recipient = {
					is_landed = yes
				}
			}
				scope:recipient = {
					depose = yes
				}
		}
		scope:recipient = {
			add_opinion = {
				modifier = owl_snd_vampire_thrall_opinion
				target = scope:actor
			}
			release_from_prison = yes
		}
		scope:actor = {
			recruit_courtier = scope:recipient
			add_hook = {
				type = owl_snd_vampire_thrall_hook
				target = scope:recipient
			}
		}
		if = {
			limit = {
				scope:owl_snd_vampire_thrall_change_faith = yes
			}
			scope:recipient = {
				set_character_faith = scope:actor.faith
			}
		}
	}

	send_options_exclusive = no
	auto_accept = yes
}
