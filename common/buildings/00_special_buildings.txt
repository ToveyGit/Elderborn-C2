###########
## Generic Holy Site Buildings
###########

### EK NOTE: Removed the non-generic holy site temples
### EK NOTE: Removed unique buildings
### EK NOTE: Removed mines

### EK EDIT: Tweaked to fit with the other holy sites buildings
holy_site_other_grand_temple_01 = {
	asset = {
		type = pdxmesh
		name = "building_special_cathedral_generic_mesh"
	}

	construction_time = very_slow_construction_time

	type_icon = "icon_structure_cathedral_zoroastric.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
	
	can_construct = {
		always = no
	}
	
	can_construct_showing_failures_only = {
		ek_building_requirement_general = yes
	}
	
	is_enabled = {
		custom_description = {
			text = holy_site_building_trigger
			barony = {
				is_holy_site_of = scope:holder.faith
			}
		}
		scope:holder = { faith = { has_doctrine_parameter = faith_uses_holy_site_other_grand_temple } }
	}
	
	cost_gold = 1000

	character_modifier = {
		monthly_piety = 0.25
		monthly_dynasty_prestige_mult = 0.05
		men_at_arms_maintenance = -0.025
		short_reign_duration_mult = -0.1
		monthly_county_control_growth_factor = 0.05
	}
	
	county_modifier = {
		tax_mult = 0.2
		development_growth_factor = 0.2
		development_growth = 0.1
	}
	
	province_modifier = {
		monthly_income = 2
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_religious
}

##########
# Hall of Heroes
##########

### EK TODO: Repurpose it or find some faiths to give it to
hall_of_heroes_01 = {
	effect_desc = {
		triggered_desc = {
			trigger = { has_dlc_feature = tours_and_tournaments }
			desc = tournament_activity_cost_max_discount_effect_desc
		}
	}

	type_icon = "icon_building_hall_of_heroes.dds"
	
	levy = 150
	max_garrison = 75
	cost_gold = 0
	construction_time = 0

	character_modifier = {
		monthly_piety_gain_per_knight_add = 0.1
		prowess = 1
		knight_effectiveness_mult = 0.05
	}

	is_enabled = {
		building_hall_of_heroes_requirement = yes
	}
	
	can_construct_showing_failures_only = { #EK ADDITION
		ek_building_requirement_general = yes
	} #EK ADDITION END
	
	next_building = hall_of_heroes_02

	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

hall_of_heroes_02 = {
	effect_desc = {
		triggered_desc = {
			trigger = { has_dlc_feature = tours_and_tournaments }
			desc = tournament_activity_cost_max_discount_effect_desc
		}
	}
	type_icon = "icon_building_hall_of_heroes.dds"
	
	levy = 265
	max_garrison = 110
	cost_gold = 225
	construction_time = 500

	character_modifier = {
		monthly_piety_gain_per_knight_add = 0.1
		prowess = 1
		knight_effectiveness_mult = 0.1
	}

	is_enabled = {
		building_hall_of_heroes_requirement = yes
	}
	
	can_construct_showing_failures_only = { #EK ADDITION
		ek_upgrading_requirement_general = yes
	} #EK ADDITION END

	
	next_building = hall_of_heroes_03

	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

hall_of_heroes_03 = {
	effect_desc = {
		triggered_desc = {
			trigger = { has_dlc_feature = tours_and_tournaments }
			desc = tournament_activity_cost_max_discount_effect_desc
		}
	}
	type_icon = "icon_building_hall_of_heroes.dds"
	
	levy = 375
	max_garrison = 150
	cost_gold = 300
	construction_time = 500

	character_modifier = {
		monthly_piety_gain_per_knight_add = 0.1
		prowess = 2
		knight_effectiveness_mult = 0.15
	}

	is_enabled = {
		building_hall_of_heroes_requirement = yes
	}

	can_construct_showing_failures_only = { #EK ADDITION
		ek_upgrading_requirement_general = yes
	} #EK ADDITION END
	
	next_building = hall_of_heroes_04

	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

hall_of_heroes_04 = {
	effect_desc = {
		triggered_desc = {
			trigger = { has_dlc_feature = tours_and_tournaments }
			desc = tournament_activity_cost_max_discount_effect_desc
		}
	}
	type_icon = "icon_building_hall_of_heroes.dds"
	
	levy = 500
	max_garrison = 225
	cost_gold = 375
	construction_time = 500

	character_modifier = {
		monthly_piety_gain_per_knight_add = 0.1
		prowess = 2
		knight_effectiveness_mult = 0.2
	}

	is_enabled = {
		building_hall_of_heroes_requirement = yes
	}

	can_construct_showing_failures_only = { #EK ADDITION
		ek_upgrading_requirement_general = yes
	} #EK ADDITION END
	
	next_building = hall_of_heroes_05

	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

hall_of_heroes_05 = {
	effect_desc = {
		triggered_desc = {
			trigger = { has_dlc_feature = tours_and_tournaments }
			desc = tournament_activity_cost_max_discount_effect_desc
		}
	}
	type_icon = "icon_building_hall_of_heroes.dds"
	
	levy = 700
	max_garrison = 260
	cost_gold = 450
	construction_time = 500

	character_modifier = {
		monthly_piety_gain_per_knight_add = 0.1
		prowess = 3
		knight_effectiveness_mult = 0.25
	}

	is_enabled = {
		building_hall_of_heroes_requirement = yes
	}

	can_construct_showing_failures_only = { #EK ADDITION
		ek_upgrading_requirement_general = yes
	} #EK ADDITION END
	
	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

##########
# Universities
##########

generic_university = {
	construction_time = very_slow_construction_time
	effect_desc = {
		desc = unlocks_building_desc
		triggered_desc = {
			trigger = { has_dlc_feature = tours_and_tournaments }
			desc = university_toto_effect_desc
		}
		triggered_desc = {
			trigger = { has_dlc_feature = royal_court }
			desc = university_roco_effect_desc
		}
		desc = university_effect_desc
	}

	type_icon = "icon_building_university.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
		building_university_requirement = yes
	}
	
	can_construct = {
		# EK EDIT: we have very specific universities, and have generic academy holdings
		always = no
		#scope:holder = {
		#	highest_held_title_tier >= tier_duchy
		#	prestige_level >= 4
		#}
		#county = {
		#	development_level >= 30
		#}
	}
	
	can_construct_showing_failures_only = { #EK ADDITION
		ek_building_requirement_general = yes
	}#EK ADDITION END
	
	show_disabled = yes
	
	on_complete = {
		county.holder = {
			save_scope_as = founder

			found_university_decision_event_effect = yes

			every_player = {
				limit = {
					NOT = { this = scope:founder }
					is_within_diplo_range = { CHARACTER = scope:founder }
				}
				trigger_event = major_decisions.2002
			}
		}
	}
	
	cost_gold = 1000

	character_modifier = {
		learning_per_prestige_level = 1
		monthly_lifestyle_xp_gain_mult = 0.1
		cultural_head_fascination_mult = 0.05
		monthly_dynasty_prestige = 0.25
	}
	
	county_modifier = {
		development_growth_factor = 0.1
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}

	}
	
	type = special

	flag = travel_point_of_interest_learning
}

########
#Greenhouse
########

special_greenhouse_01 = {
	construction_time = very_slow_construction_time
	
	is_enabled = {
		has_variable = variable_greenhouse
	}
	
	province_modifier = {
		monthly_income = 1
	}

	county_modifier = {
		development_growth_factor = 0.25
		county_opinion_add = 25
	}
	character_modifier = {
		health = 0.25
		monthly_prestige = 1
	}
	can_construct_showing_failures_only = { # EK ADDITION
		ek_building_requirement_general = yes
	} # EK ADDITION END

	type_icon = "icon_building_generic_house.dds"
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special
	
	flag = travel_point_of_interest_learning
}

